<template>
  <div class="small"></div>
</template>

<script>
// èƒŒæ™¯ç”»å¸ƒ
let background = {
  width: 5,
  height: 5,
}

let arr = new Array()
// ç©å®¶åˆå§‹ä½ç½®
let userY = 2

// æ‰“å°å‡ºç”»å¸ƒæ•°ç»„
for (let i = 0; i < background.height; i++) {
  let col = new Array()
  for (let j = 0; j < background.width; j++) {
    col[j] = 'ğŸš¥'
  }
  arr[i] = col
}

arr[background.height - 1][userY] = 'ğŸ˜'

window.start = function () {
  console.log('è¯·å…ˆç‚¹å‡»ä¸€ä¸‹æµè§ˆå™¨é¡µé¢ï¼Œ2ç§’ä¹‹åå¼€å§‹æ¸¸æˆ')
  setTimeout(() => {
    console.clear()
    let starFlash = setInterval(() => {
      arr.pop() // æ¸…æ¥šæœ€é¡¶ç«¯çš„ä¸€è¡Œ
      if (arr[arr.length - 1][userY] == 'ğŸ˜‚') {
        // åˆ¤æ–­æ˜¯å¦å·²ç» ä¸¤ä¸ªå›¾æ ‡æ˜¯å¦æ’åœ¨ä¸€èµ·
        arr[arr.length - 1][userY] = 'ğŸ‡'
        new Audio('https://img.lookroot.cn/music/12233.wav').play()
        setTimeout(() => {
          clearInterval(starFlash)
          console.clear()
          console.log('%cOVER', 'color: red;font-size:48px')
        }, 100)
      } else {
        arr[arr.length - 1][userY] = 'ğŸ˜'
        arr.unshift(new Array(background.width).fill('ğŸš¥')) //  åœ¨æœ€é¡¶ç«¯åˆ›å»ºä¸€è¡Œæ— éšœç¢çš„ç©ºèƒŒæ™¯ç”»å¸ƒ
        arr[0][parseInt(Math.random() * background.width)] = 'ğŸ˜‚' // éšæœºåˆ›å»ºä¸€ä¸ªéšœç¢ç‰©
        // æ‰“å°å‡ºç”»å¸ƒ
        let endString = ''
        for (let i = 0; i < arr.length; i++) {
          let str = ''
          for (let j = 0; j < arr[i].length; j++) {
            str += arr[i][j]
          }
          endString += str + '\n'
        }
        console.clear()
        console.log(endString)
      }
    }, 200)
  }, 2000)
}

window.onkeydown = (e) => {
  if (e.keyCode == 37 && userY > 0) {
    userY--
  } else if (e.keyCode == 39 && userY < background.width - 1) {
    userY++
  }
}
export default {
  mounted() {
    console.log(`è¾“å…¥ start() å³å¯å¼€å§‹æ¸¸æˆ`)
  },
}
</script>

<style>
</style>