(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{523:function(_,v,l){"use strict";l.r(v);var i=l(4),t=Object(i.a)({},(function(){var _=this,v=_.$createElement,l=_._self._c||v;return l("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[l("h2",{attrs:{id:"前端性能优化"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#前端性能优化"}},[_._v("#")]),_._v(" 前端性能优化")]),_._v(" "),l("p",[_._v("对于前端来说，性能优化无非就是执行相隔方面，分别是。文件获取优化和代码执行优化")]),_._v(" "),l("h4",{attrs:{id:"文件获取优化"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#文件获取优化"}},[_._v("#")]),_._v(" 文件获取优化")]),_._v(" "),l("ul",[l("li",[_._v("加载文件 css js")]),_._v(" "),l("li",[_._v("http 协议的细节‘")]),_._v(" "),l("li",[_._v("从输入 url 到页面渲染发生了什么")]),_._v(" "),l("li",[_._v("大厂怎么上线前端的代码")])]),_._v(" "),l("h4",{attrs:{id:"代码执行优化"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#代码执行优化"}},[_._v("#")]),_._v(" 代码执行优化")]),_._v(" "),l("ul",[l("li",[_._v("节流 防抖")]),_._v(" "),l("li",[_._v("重绘 回流")]),_._v(" "),l("li",[_._v("vue react（ssr）常见优化，代码执行的更少，dom 的操作更少")]),_._v(" "),l("li",[_._v("浏览器是如何操作 DOM 的")])]),_._v(" "),l("hr"),_._v(" "),l("h2",{attrs:{id:"文件优化"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#文件优化"}},[_._v("#")]),_._v(" 文件优化")]),_._v(" "),l("h3",{attrs:{id:"网络协议"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#网络协议"}},[_._v("#")]),_._v(" 网络协议")]),_._v(" "),l("blockquote",[l("p",[_._v("网络协议是很多性能优化的基础，了解了网络协议，很多优化也就是会呼之欲出")])]),_._v(" "),l("ul",[l("li",[_._v("ip 协议 （寻址） 通过 ip 找到准确的地址 如 39.96.42.170 找到具体的地址")]),_._v(" "),l("li",[_._v("ip 协议之上，使用 tcp 协议来确保数据的完整有序\n"),l("ol",[l("li",[_._v("三次握手（每次请求都会有三次捂手）-- 所以要尽量少的请求来提高性能")]),_._v(" "),l("li",[_._v("滑动窗口")]),_._v(" "),l("li",[_._v("慢启动")]),_._v(" "),l("li",[_._v("挥手")]),_._v(" "),l("li",[_._v("。。。。")])])]),_._v(" "),l("li",[_._v("在 tcp 协议之上，我们使用 http 协议来作为网页传输的协议（应用层）")]),_._v(" "),l("li",[_._v("udp 协议也是基于 ip 的，不考虑数据的完整和有序。（那为啥还需要 udp 协议呢？）\n"),l("ol",[l("li",[_._v("性能更高（因为不像 tcp 一样要考虑一大堆的事情）")]),_._v(" "),l("li",[_._v("不在乎丢包 （音频 视频聊天 直播）")]),_._v(" "),l("li",[_._v("包比较小 不需要分包，只需要重发即可的情况下可以使用")]),_._v(" "),l("li",[_._v("直播之类就需要使用 udp 协议")]),_._v(" "),l("li",[_._v("DNS 是基于 UDP 协议的")])])])]),_._v(" "),l("p",[_._v("http 是如何聊天的？")]),_._v(" "),l("ol",[l("li",[_._v("建立连接 -- （主要是 TCP）\n"),l("ul",[l("li",[_._v("服务器 你在吗")]),_._v(" "),l("li",[_._v("我在")]),_._v(" "),l("li",[_._v("那我要给你发数据了")])])])]),_._v(" "),l("h4",{attrs:{id:"少加载文件"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#少加载文件"}},[_._v("#")]),_._v(" 少加载文件")]),_._v(" "),l("ul",[l("li",[l("p",[_._v("如何少加载文件（合理李颖浏览器缓存文件）")]),_._v(" "),l("ol",[l("li",[l("p",[_._v("首次访问 http 请求 server 正常返回")]),_._v(" "),l("ul",[l("li",[_._v("返回响应头加上强缓存说明，如"),l("code",[_._v("expires:wed 11 aug 2019")]),_._v("或者"),l("code",[_._v("cache-control:max-age=300000")]),_._v("（优先级更高）")]),_._v(" "),l("li",[_._v("两个 header 都是都断告诉浏览器，这个文件，多少时间内是不过期的")]),_._v(" "),l("li",[_._v("浏览器接收到这两个 header 之后，就会将文件给缓存下来")])])]),_._v(" "),l("li",[l("p",[_._v("在未过期的时间内再次请求这个文件")]),_._v(" "),l("ul",[l("li",[_._v("浏览器识别到 强缓存命中，请求不发出，直接用本地缓存的文件 状态码 "),l("code",[_._v("200 from cache")])])])]),_._v(" "),l("li",[l("p",[_._v("过期后再次访问这个文件，浏览器强缓存失效，这时候就会采用协商缓存（因为毕竟这个文件浏览器存在过）")]),_._v(" "),l("ul",[l("li",[_._v("这时候浏览器不会直接发出请求，而是会问一下后端，在 header 上加上请求头，后端会告诉浏览器是否文件还存在，如果好存在，就可以继续直接使用缓存")])])]),_._v(" "),l("li",[l("p",[_._v("如果后端返回原来那么文件内容已经被修改了，不存在了，那就只能重新加载了。")])]),_._v(" "),l("li",[l("p",[_._v("以上文件缓存都是浏览器本身自己的机制，js 都控制不到，但是我们可以通过工程化，来更搞笑的利用缓存")])])])]),_._v(" "),l("li",[l("p",[_._v("如何高效利用缓存")]),_._v(" "),l("ol",[l("li",[l("p",[_._v("缓存时间过长")]),_._v(" "),l("ul",[l("li",[_._v("发布上线了，用户还用缓存，会有 BUG")])])]),_._v(" "),l("li",[l("p",[_._v("缓存时间过短")]),_._v(" "),l("ul",[l("li",[_._v("重复加载的文件太多，浪费带宽")])])]),_._v(" "),l("li",[l("p",[_._v("模板 （html） 静态资源（css js img video audio...）")]),_._v(" "),l("ul",[l("li",[l("p",[_._v("模板或者 html 是不能有缓存的，这个是入口，一旦新代码发布上线，就没办法加载了")])]),_._v(" "),l("li",[l("p",[_._v("文件+哈希 - - 上线之后，要求用户用文件+哈希的方式来解决了（现在 webpack 工程化已经很成熟了）现在是先上线 js 再上线 html")]),_._v(" "),l("p",[l("img",{attrs:{src:"https://img-blog.csdnimg.cn/2020081822404222.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NjI0MDE2Mg==,size_16,color_FFFFFF,t_70#pic_center",alt:"文件名+哈希"}})]),_._v(" "),l("p",[_._v("现在 webpack 打包之后的文件都是这样文件名+哈希的形式")])])])])])])]),_._v(" "),l("h4",{attrs:{id:"优化策略"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#优化策略"}},[_._v("#")]),_._v(" 优化策略")]),_._v(" "),l("blockquote",[l("p",[_._v("在明白了网络协议的原理之后，我们就可以知道如何优化了")])]),_._v(" "),l("ul",[l("li",[_._v("长连接")]),_._v(" "),l("li",[_._v("减少文件体积\n"),l("ol",[l("li",[_._v("js 打包压缩")]),_._v(" "),l("li",[_._v("图片压缩")]),_._v(" "),l("li",[_._v("geip")])])]),_._v(" "),l("li",[_._v("减少文件请求的次数\n"),l("ol",[l("li",[_._v("雪碧图")]),_._v(" "),l("li",[_._v("js，css 打包")]),_._v(" "),l("li",[_._v("缓存控制")]),_._v(" "),l("li",[_._v("懒加载")])])]),_._v(" "),l("li",[_._v("减少用户和服务器的距离 （比如服务器在北京，人在美国）\n"),l("ol",[l("li",[_._v("cdn - - 简单理解就是将文件传在 cdn 上，如人在北京，访问长沙的站，就可以优先从北京的 cdn 机房上获取，就不用到长沙的机房上获取")])])]),_._v(" "),l("li",[_._v("本地缓存")])]),_._v(" "),l("h5",{attrs:{id:"图片优化"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#图片优化"}},[_._v("#")]),_._v(" 图片优化")]),_._v(" "),l("blockquote",[l("p",[_._v("图片通常是最占流量的，PC 端平均加载图片大小是 600k，就比 js 打包之后的文件还打，所针对图片的优化，是受益非常不错的")])]),_._v(" "),l("p",[_._v("不同的场景，使用不同的类型")]),_._v(" "),l("ul",[l("li",[_._v("jpg\n"),l("ol",[l("li",[_._v("有损压缩")]),_._v(" "),l("li",[_._v("体积小，不支持透明")]),_._v(" "),l("li",[_._v("用于背景图、轮播图")])])]),_._v(" "),l("li",[_._v("png\n"),l("ol",[l("li",[_._v("无损压缩，质量高，支持透明")]),_._v(" "),l("li",[_._v("色彩线条更加丰富，常用小图，如 logo，商品 icon")])])]),_._v(" "),l("li",[_._v("svg\n"),l("ol",[l("li",[_._v("矢量图，体积小")]),_._v(" "),l("li",[_._v("渲染成本、学习成本")])])])]),_._v(" "),l("h5",{attrs:{id:"本地缓存"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#本地缓存"}},[_._v("#")]),_._v(" 本地缓存")]),_._v(" "),l("blockquote",[l("p",[_._v("cookie localstroage sessionStroage indexDB")])]),_._v(" "),l("ul",[l("li",[_._v("cookie")])]),_._v(" "),l("ol",[l("li",[_._v("最早、体积限定、性能浪费、所有请求都带上所有当前域名的 cookie")]),_._v(" "),l("li",[_._v("web stroage\n"),l("ul",[l("li",[_._v("LocalStroage 和 SessionStroage")]),_._v(" "),l("li",[_._v("存储量大，不自动发给服务端、js 控制")])])]),_._v(" "),l("li",[_._v("indexdb\n"),l("ul",[l("li",[_._v("运行在浏览器上的非关系型数据库")])])]),_._v(" "),l("li",[_._v("Pwa\n"),l("ul",[l("li",[_._v("基于缓存技术的应用模型")])])])])])}),[],!1,null,null,null);v.default=t.exports}}]);